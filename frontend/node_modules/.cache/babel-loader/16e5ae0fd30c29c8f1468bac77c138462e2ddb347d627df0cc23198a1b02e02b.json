{"ast":null,"code":"import _objectSpread from\"C:/Users/daniel.adm/Documents/PROJETO CONTROLE PAPEL/hmaa-papel/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Card,CardContent,CardHeader,TextField,Button,Box,CircularProgress,Alert}from'@mui/material';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[formData,setFormData]=useState({usuario:'',senha:''});const[loading,setLoading]=useState(false);const[error,setError]=useState('');const navigate=useNavigate();// Função para atualizar o estado conforme o usuário digita\nconst handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};// Função para lidar com o envio do formulário de login\nconst handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');try{// Faz a requisição POST para a API de login que criamos\nconst response=await axios.post('/api/auth/login',formData);// --- LÓGICA PÓS-LOGIN (MUITO IMPORTANTE) ---\n// 1. Salva o token e os dados do usuário no localStorage do navegador.\n// Isso permite que a aplicação \"lembre\" que o usuário está logado.\nlocalStorage.setItem('token',response.data.token);localStorage.setItem('usuario',JSON.stringify(response.data.usuario));// 2. Redireciona o usuário para a página principal (Dashboard)\nnavigate('/');// 3. (Opcional) Recarrega a página para que componentes como o Layout/Header\n// possam ler os novos dados do localStorage e se atualizar.\nwindow.location.reload();}catch(err){var _err$response,_err$response$data;// Exibe a mensagem de erro vinda do backend (ex: \"Usuário ou senha inválidos.\")\nsetError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Erro ao tentar fazer login. Verifique a conexão.');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',minHeight:'80vh'},children:/*#__PURE__*/_jsxs(Card,{elevation:4,sx:{width:'100%',maxWidth:'400px'},children:[/*#__PURE__*/_jsx(CardHeader,{title:\"Controle de Papel HMAA\",subheader:\"Acesse o sistema\",sx:{textAlign:'center'}}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,noValidate:true,children:[error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"usuario\",label:\"Nome de Usu\\xE1rio\",name:\"usuario\",autoComplete:\"username\",autoFocus:true,value:formData.usuario,onChange:handleChange}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,name:\"senha\",label:\"Senha\",type:\"password\",id:\"password\",autoComplete:\"current-password\",value:formData.senha,onChange:handleChange}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2},disabled:loading,children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:24,color:\"inherit\"}):'Entrar'})]})})]})});}export default Login;","map":{"version":3,"names":["React","useState","Card","CardContent","CardHeader","TextField","Button","Box","CircularProgress","Alert","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","formData","setFormData","usuario","senha","loading","setLoading","error","setError","navigate","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","response","post","localStorage","setItem","data","token","JSON","stringify","window","location","reload","err","_err$response","_err$response$data","message","sx","display","justifyContent","alignItems","minHeight","children","elevation","width","maxWidth","title","subheader","textAlign","component","onSubmit","noValidate","severity","mb","margin","required","fullWidth","id","label","autoComplete","autoFocus","onChange","type","variant","mt","disabled","size","color"],"sources":["C:/Users/daniel.adm/Documents/PROJETO CONTROLE PAPEL/hmaa-papel/frontend/src/pages/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Card, CardContent, CardHeader, TextField, Button, Box, CircularProgress, Alert } from '@mui/material';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction Login() {\r\n  const [formData, setFormData] = useState({ usuario: '', senha: '' });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  // Função para atualizar o estado conforme o usuário digita\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  // Função para lidar com o envio do formulário de login\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      // Faz a requisição POST para a API de login que criamos\r\n      const response = await axios.post('/api/auth/login', formData);\r\n      \r\n      // --- LÓGICA PÓS-LOGIN (MUITO IMPORTANTE) ---\r\n      // 1. Salva o token e os dados do usuário no localStorage do navegador.\r\n      // Isso permite que a aplicação \"lembre\" que o usuário está logado.\r\n      localStorage.setItem('token', response.data.token);\r\n      localStorage.setItem('usuario', JSON.stringify(response.data.usuario));\r\n      \r\n      // 2. Redireciona o usuário para a página principal (Dashboard)\r\n      navigate('/');\r\n      \r\n      // 3. (Opcional) Recarrega a página para que componentes como o Layout/Header\r\n      // possam ler os novos dados do localStorage e se atualizar.\r\n      window.location.reload();\r\n\r\n    } catch (err) {\r\n      // Exibe a mensagem de erro vinda do backend (ex: \"Usuário ou senha inválidos.\")\r\n      setError(err.response?.data?.message || 'Erro ao tentar fazer login. Verifique a conexão.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '80vh' }}>\r\n      <Card elevation={4} sx={{ width: '100%', maxWidth: '400px' }}>\r\n        <CardHeader title=\"Controle de Papel HMAA\" subheader=\"Acesse o sistema\" sx={{ textAlign: 'center' }} />\r\n        <CardContent>\r\n          <Box component=\"form\" onSubmit={handleSubmit} noValidate>\r\n            {error && <Alert severity=\"error\" sx={{ mb: 2 }}>{error}</Alert>}\r\n            <TextField\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              id=\"usuario\"\r\n              label=\"Nome de Usuário\"\r\n              name=\"usuario\"\r\n              autoComplete=\"username\"\r\n              autoFocus\r\n              value={formData.usuario}\r\n              onChange={handleChange}\r\n            />\r\n            <TextField\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              name=\"senha\"\r\n              label=\"Senha\"\r\n              type=\"password\"\r\n              id=\"password\"\r\n              autoComplete=\"current-password\"\r\n              value={formData.senha}\r\n              onChange={handleChange}\r\n            />\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              sx={{ mt: 3, mb: 2 }}\r\n              disabled={loading}\r\n            >\r\n              {loading ? <CircularProgress size={24} color=\"inherit\" /> : 'Entrar'}\r\n            </Button>\r\n          </Box>\r\n        </CardContent>\r\n      </Card>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}