{"ast":null,"code":"import _objectSpread from\"C:/Users/daniel.adm/Documents/PROJETO CONTROLE PAPEL/hmaa-papel/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Card,CardHeader,CardContent,Grid,TextField,Button,Box,Select,MenuItem,InputLabel,FormControl,CircularProgress,Snackbar,Alert}from'@mui/material';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function GerenciarUsuarios(){// Estado para os dados do formulário\nconst[formData,setFormData]=useState({nome:'',usuario:'',senha:'',tipo:'operador'// Valor padrão para o tipo de usuário\n});// Estado para controlar o carregamento durante o envio do formulário\nconst[loading,setLoading]=useState(false);// Estado para as notificações (snackbar)\nconst[snackbar,setSnackbar]=useState({open:false,message:'',severity:'success'});// Função genérica para lidar com a mudança nos campos do formulário\nconst handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};// Função para lidar com o envio do formulário\nconst handleSubmit=async e=>{e.preventDefault();setLoading(true);try{// Usa a rota de registro que já existe no backend\nawait axios.post('/api/auth/register',formData);setSnackbar({open:true,message:'Usuário criado com sucesso!',severity:'success'});// Limpa o formulário após o sucesso\nsetFormData({nome:'',usuario:'',senha:'',tipo:'operador'});}catch(error){var _error$response,_error$response$data;// Mostra uma mensagem de erro vinda da API ou uma mensagem padrão\nconst errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Erro ao criar o usuário.';setSnackbar({open:true,message:errorMessage,severity:'error'});}finally{setLoading(false);}};// Função para fechar a notificação\nconst handleCloseSnackbar=(event,reason)=>{if(reason==='clickaway'){return;}setSnackbar(_objectSpread(_objectSpread({},snackbar),{},{open:false}));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Card,{elevation:3,sx:{maxWidth:'600px',margin:'auto',mt:4},children:[/*#__PURE__*/_jsx(CardHeader,{title:\"Criar Novo Usu\\xE1rio\",titleTypographyProps:{variant:'h5',align:'center'}}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,noValidate:true,children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,required:true,id:\"nome\",label:\"Nome Completo\",name:\"nome\",value:formData.nome,onChange:handleChange})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,required:true,id:\"usuario\",label:\"Nome de Usu\\xE1rio (para login)\",name:\"usuario\",value:formData.usuario,onChange:handleChange,helperText:\"Ex: joao.silva (sem espa\\xE7os ou caracteres especiais)\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,required:true,id:\"senha\",label:\"Senha Inicial\",name:\"senha\",type:\"password\",value:formData.senha,onChange:handleChange,helperText:\"O usu\\xE1rio dever\\xE1 ser orientado a trocar esta senha no primeiro acesso.\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,required:true,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"tipo-usuario-label\",children:\"Tipo de Usu\\xE1rio\"}),/*#__PURE__*/_jsxs(Select,{labelId:\"tipo-usuario-label\",id:\"tipo\",label:\"Tipo de Usu\\xE1rio\",name:\"tipo\",value:formData.tipo,onChange:handleChange,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"operador\",children:\"Operador\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"admin\",children:\"Administrador\"})]})]})})]}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'flex-end',mt:4},children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",size:\"large\",disabled:loading,startIcon:loading?/*#__PURE__*/_jsx(CircularProgress,{size:20,color:\"inherit\"}):null,children:loading?'Criando...':'Criar Usuário'})})]})})]}),/*#__PURE__*/_jsx(Snackbar,{open:snackbar.open,autoHideDuration:6000,onClose:handleCloseSnackbar,anchorOrigin:{vertical:'bottom',horizontal:'center'},children:/*#__PURE__*/_jsx(Alert,{onClose:handleCloseSnackbar,severity:snackbar.severity,sx:{width:'100%'},variant:\"filled\",children:snackbar.message})})]});}export default GerenciarUsuarios;","map":{"version":3,"names":["React","useState","Card","CardHeader","CardContent","Grid","TextField","Button","Box","Select","MenuItem","InputLabel","FormControl","CircularProgress","Snackbar","Alert","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","GerenciarUsuarios","formData","setFormData","nome","usuario","senha","tipo","loading","setLoading","snackbar","setSnackbar","open","message","severity","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","post","error","_error$response","_error$response$data","errorMessage","response","data","handleCloseSnackbar","event","reason","children","elevation","sx","maxWidth","margin","mt","title","titleTypographyProps","variant","align","component","onSubmit","noValidate","container","spacing","item","xs","fullWidth","required","id","label","onChange","helperText","type","labelId","display","justifyContent","size","disabled","startIcon","color","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","width"],"sources":["C:/Users/daniel.adm/Documents/PROJETO CONTROLE PAPEL/hmaa-papel/frontend/src/pages/GerenciarUsuarios.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport {\r\n  Card,\r\n  CardHeader,\r\n  CardContent,\r\n  Grid,\r\n  TextField,\r\n  Button,\r\n  Box,\r\n  Select,\r\n  MenuItem,\r\n  InputLabel,\r\n  FormControl,\r\n  CircularProgress,\r\n  Snackbar,\r\n  Alert\r\n} from '@mui/material';\r\nimport axios from 'axios';\r\n\r\nfunction GerenciarUsuarios() {\r\n  // Estado para os dados do formulário\r\n  const [formData, setFormData] = useState({\r\n    nome: '',\r\n    usuario: '',\r\n    senha: '',\r\n    tipo: 'operador', // Valor padrão para o tipo de usuário\r\n  });\r\n\r\n  // Estado para controlar o carregamento durante o envio do formulário\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Estado para as notificações (snackbar)\r\n  const [snackbar, setSnackbar] = useState({\r\n    open: false,\r\n    message: '',\r\n    severity: 'success',\r\n  });\r\n\r\n  // Função genérica para lidar com a mudança nos campos do formulário\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  // Função para lidar com o envio do formulário\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Usa a rota de registro que já existe no backend\r\n      await axios.post('/api/auth/register', formData);\r\n      setSnackbar({ open: true, message: 'Usuário criado com sucesso!', severity: 'success' });\r\n\r\n      // Limpa o formulário após o sucesso\r\n      setFormData({\r\n        nome: '',\r\n        usuario: '',\r\n        senha: '',\r\n        tipo: 'operador',\r\n      });\r\n    } catch (error) {\r\n      // Mostra uma mensagem de erro vinda da API ou uma mensagem padrão\r\n      const errorMessage = error.response?.data?.message || 'Erro ao criar o usuário.';\r\n      setSnackbar({ open: true, message: errorMessage, severity: 'error' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Função para fechar a notificação\r\n  const handleCloseSnackbar = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n    setSnackbar({ ...snackbar, open: false });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Card elevation={3} sx={{ maxWidth: '600px', margin: 'auto', mt: 4 }}>\r\n        <CardHeader\r\n          title=\"Criar Novo Usuário\"\r\n          titleTypographyProps={{ variant: 'h5', align: 'center' }}\r\n        />\r\n        <CardContent>\r\n          <Box component=\"form\" onSubmit={handleSubmit} noValidate>\r\n            <Grid container spacing={3}>\r\n              {/* --- Campo Nome Completo --- */}\r\n              <Grid item xs={12}>\r\n                <TextField\r\n                  fullWidth\r\n                  required\r\n                  id=\"nome\"\r\n                  label=\"Nome Completo\"\r\n                  name=\"nome\"\r\n                  value={formData.nome}\r\n                  onChange={handleChange}\r\n                />\r\n              </Grid>\r\n\r\n              {/* --- Campo Nome de Usuário (Login) --- */}\r\n              <Grid item xs={12}>\r\n                <TextField\r\n                  fullWidth\r\n                  required\r\n                  id=\"usuario\"\r\n                  label=\"Nome de Usuário (para login)\"\r\n                  name=\"usuario\"\r\n                  value={formData.usuario}\r\n                  onChange={handleChange}\r\n                  helperText=\"Ex: joao.silva (sem espaços ou caracteres especiais)\"\r\n                />\r\n              </Grid>\r\n\r\n              {/* --- Campo Senha Inicial --- */}\r\n              <Grid item xs={12}>\r\n                <TextField\r\n                  fullWidth\r\n                  required\r\n                  id=\"senha\"\r\n                  label=\"Senha Inicial\"\r\n                  name=\"senha\"\r\n                  type=\"password\"\r\n                  value={formData.senha}\r\n                  onChange={handleChange}\r\n                  helperText=\"O usuário deverá ser orientado a trocar esta senha no primeiro acesso.\"\r\n                />\r\n              </Grid>\r\n\r\n              {/* --- Campo Tipo de Usuário --- */}\r\n              <Grid item xs={12}>\r\n                <FormControl fullWidth required>\r\n                  <InputLabel id=\"tipo-usuario-label\">Tipo de Usuário</InputLabel>\r\n                  <Select\r\n                    labelId=\"tipo-usuario-label\"\r\n                    id=\"tipo\"\r\n                    label=\"Tipo de Usuário\"\r\n                    name=\"tipo\"\r\n                    value={formData.tipo}\r\n                    onChange={handleChange}\r\n                  >\r\n                    <MenuItem value=\"operador\">Operador</MenuItem>\r\n                    <MenuItem value=\"admin\">Administrador</MenuItem>\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n            </Grid>\r\n\r\n            {/* --- Botão de Ação --- */}\r\n            <Box sx={{ display: 'flex', justifyContent: 'flex-end', mt: 4 }}>\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"contained\"\r\n                size=\"large\"\r\n                disabled={loading}\r\n                startIcon={loading ? <CircularProgress size={20} color=\"inherit\" /> : null}\r\n              >\r\n                {loading ? 'Criando...' : 'Criar Usuário'}\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* --- Componente de Notificação --- */}\r\n      <Snackbar\r\n        open={snackbar.open}\r\n        autoHideDuration={6000}\r\n        onClose={handleCloseSnackbar}\r\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n      >\r\n        <Alert\r\n          onClose={handleCloseSnackbar}\r\n          severity={snackbar.severity}\r\n          sx={{ width: '100%' }}\r\n          variant=\"filled\"\r\n        >\r\n          {snackbar.message}\r\n        </Alert>\r\n      </Snackbar>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default GerenciarUsuarios;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}