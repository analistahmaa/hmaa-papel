{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Outlet,Link,useLocation}from'react-router-dom';import{AppBar,Toolbar,Typography,Box,Tabs,Tab,Button}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Layout(){const location=useLocation();const[usuario,setUsuario]=useState(null);useEffect(()=>{// Pega os dados do usuário do localStorage quando o componente montar\nconst usuarioData=JSON.parse(localStorage.getItem('usuario'));if(usuarioData){setUsuario(usuarioData);}},[]);const handleLogout=()=>{localStorage.removeItem('token');localStorage.removeItem('usuario');window.location.href='/login';// Força o redirecionamento e recarregamento\n};return(/*#__PURE__*/// Box principal que ocupa a tela inteira e organiza em coluna\n_jsxs(Box,{sx:{display:'flex',flexDirection:'column',minHeight:'100vh'},children:[/*#__PURE__*/_jsx(AppBar,{position:\"static\",children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",sx:{flexGrow:1},children:\"Controle de Papel HMAA\"}),usuario&&/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsxs(Typography,{sx:{mr:2},children:[\"Bem-vindo(a), \",usuario.nome]}),/*#__PURE__*/_jsx(Button,{color:\"inherit\",onClick:handleLogout,children:\"Sair\"})]})]})}),/*#__PURE__*/_jsx(Box,{sx:{borderBottom:1,borderColor:'divider',bgcolor:'background.paper'},children:/*#__PURE__*/_jsxs(Tabs,{value:location.pathname,centered:true,children:[/*#__PURE__*/_jsx(Tab,{label:\"Dashboard\",value:\"/\",to:\"/\",component:Link}),/*#__PURE__*/_jsx(Tab,{label:\"Cadastrar Lan\\xE7amento\",value:\"/cadastrar\",to:\"/cadastrar\",component:Link}),/*#__PURE__*/_jsx(Tab,{label:\"Ver Lan\\xE7amentos\",value:\"/lancamentos\",to:\"/lancamentos\",component:Link}),/*#__PURE__*/_jsx(Tab,{label:\"Relat\\xF3rios\",value:\"/relatorios\",to:\"/relatorios\",component:Link}),(usuario===null||usuario===void 0?void 0:usuario.tipo)==='admin'&&/*#__PURE__*/_jsx(Tab,{label:\"Gerenciar Usu\\xE1rios\",value:\"/usuarios\",to:\"/usuarios\",component:Link})]})}),/*#__PURE__*/_jsxs(Box,{component:\"main\",sx:{flexGrow:1,p:3,bgcolor:'#f4f6f8'},children:[/*#__PURE__*/_jsx(Outlet,{}),\" \"]})]}));}export default Layout;","map":{"version":3,"names":["React","useState","useEffect","Outlet","Link","useLocation","AppBar","Toolbar","Typography","Box","Tabs","Tab","Button","jsx","_jsx","jsxs","_jsxs","Layout","location","usuario","setUsuario","usuarioData","JSON","parse","localStorage","getItem","handleLogout","removeItem","window","href","sx","display","flexDirection","minHeight","children","position","variant","component","flexGrow","alignItems","mr","nome","color","onClick","borderBottom","borderColor","bgcolor","value","pathname","centered","label","to","tipo","p"],"sources":["C:/Users/daniel.adm/Documents/PROJETO CONTROLE PAPEL/hmaa-papel/frontend/src/components/Layout.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Outlet, Link, useLocation } from 'react-router-dom';\r\nimport { AppBar, Toolbar, Typography, Box, Tabs, Tab, Button } from '@mui/material';\r\n\r\nfunction Layout() {\r\n  const location = useLocation();\r\n  const [usuario, setUsuario] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // Pega os dados do usuário do localStorage quando o componente montar\r\n    const usuarioData = JSON.parse(localStorage.getItem('usuario'));\r\n    if (usuarioData) {\r\n      setUsuario(usuarioData);\r\n    }\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('usuario');\r\n    window.location.href = '/login'; // Força o redirecionamento e recarregamento\r\n  };\r\n\r\n  return (\r\n    // Box principal que ocupa a tela inteira e organiza em coluna\r\n    <Box sx={{ display: 'flex', flexDirection: 'column', minHeight: '100vh' }}>\r\n      \r\n      {/* 1. AppBar/Header */}\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\r\n            Controle de Papel HMAA\r\n          </Typography>\r\n          {usuario && (\r\n            <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n              <Typography sx={{ mr: 2 }}>\r\n                Bem-vindo(a), {usuario.nome}\r\n              </Typography>\r\n              <Button color=\"inherit\" onClick={handleLogout}>\r\n                Sair\r\n              </Button>\r\n            </Box>\r\n          )}\r\n        </Toolbar>\r\n      </AppBar>\r\n\r\n      {/* 2. Barra de Navegação - VERSÃO COMPLETA E CORRIGIDA */}\r\n      <Box sx={{ borderBottom: 1, borderColor: 'divider', bgcolor: 'background.paper' }}>\r\n        <Tabs value={location.pathname} centered>\r\n          <Tab label=\"Dashboard\" value=\"/\" to=\"/\" component={Link} />\r\n          <Tab label=\"Cadastrar Lançamento\" value=\"/cadastrar\" to=\"/cadastrar\" component={Link} />\r\n          \r\n          {/* BOTÕES CORRETOS E HABILITADOS */}\r\n          <Tab label=\"Ver Lançamentos\" value=\"/lancamentos\" to=\"/lancamentos\" component={Link} />\r\n          <Tab label=\"Relatórios\" value=\"/relatorios\" to=\"/relatorios\" component={Link} />\r\n          \r\n          {/* Renderização condicional para o link de admin */}\r\n          {usuario?.tipo === 'admin' && (\r\n             <Tab label=\"Gerenciar Usuários\" value=\"/usuarios\" to=\"/usuarios\" component={Link} />\r\n          )}\r\n        </Tabs>\r\n      </Box>\r\n\r\n      {/* 3. Conteúdo Principal da Página */}\r\n      <Box\r\n        component=\"main\"\r\n        sx={{\r\n          flexGrow: 1,\r\n          p: 3,\r\n          bgcolor: '#f4f6f8'\r\n        }}\r\n      >\r\n        <Outlet /> {/* Onde as páginas são renderizadas */}\r\n      </Box>\r\n\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Layout;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}